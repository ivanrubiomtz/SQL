--
-- INSERTA DATOS EN TABLA STORES SP_SUCURSALES --
USE pubs
GO

CREATE PROCEDURE sp_sucursales (@id char(4), @nom varchar(40), @dir varchar (40), @ciu varchar(20), @st char(2), @zp char (5))
AS
BEGIN
	INSERT INTO stores (stor_id, stor_name, stor_address, city, state, zip)
		VALUES (@id, @nom, @dir, @ciu, @st, @zp)
END
GO

--EJECUTA PROCEDIMIENTO SP_SUCURSALES
EXEC sp_sucursales '2010', 'Tabacalera', '33 Baranda Av.', 'CDMX', 'MX','06030'
	

--
-- CONSULTA SELECT SP_EMPLOY
USE pubs  
GO  
ALTER PROCEDURE sp_employ  
    @ln varchar(30),   
    @fn varchar(20)   
AS   
    SET NOCOUNT ON;  
    SELECT fname, lname, emp_id  
    FROM employee  
    WHERE fname = @fn AND lname = @ln  
     
GO  

--EJECUTA PROCEDIMIENTO SP_EMPLOY
EXEC sp_employ @ln = 'Tonini', @fn = 'Daniel' 



-- BUSCAR PRODUCTOS SP_BUSCARPRODUCTO
USE Northwind
GO

CREATE PROCEDURE sp_BuscarProducto (@nom nvarchar(40))
AS
BEGIN
	SELECT * 
		FROM Products AS p
		WHERE p.ProductName LIKE '%' + @nom + '%'
END 
GO

--EJECUTA PROCEDIMIENTO SP_BUSCARPRODUCTO
EXEC sp_BuscarProducto 'Chai'



--PROCEDIMIENTO OUTPUT CALCULA PROMEDIO DE DOS NUMEROS
CREATE PROCEDURE sp_CalculaPromedio (@n1 DECIMAL(4,2), @n2 DECIMAL(4,2), @resu DECIMAL(4,2) OUTPUT)
AS
BEGIN
	SELECT @resu = (@n1 + @n2) / 2
END 
GO

--EJECUTA PROCEDIMIENTO OUTPUT
USE Northwind
GO
DECLARE @varesultado DECIMAL (4,2)
EXECUTE sp_CalculaPromedio 50, 10, @varesultado OUTPUT
SELECT @varesultado AS Promedio
